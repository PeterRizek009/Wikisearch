{"ast":null,"code":"import _regeneratorRuntime from\"D:/Wikisearch/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Wikisearch/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Wikisearch/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useEffect,useState,useRef}from'react';import axios from'axios';import'./searchapp.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchApp=function SearchApp(_ref){var saved=_ref.saved;var _useState=useState(' '),_useState2=_slicedToArray(_useState,2),term=_useState2[0],setTerm=_useState2[1];var _useState3=useState(term),_useState4=_slicedToArray(_useState3,2),debounceSearch=_useState4[0],setDebounceSearch=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),result=_useState6[0],setResult=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),bookmark=_useState8[0],setBookmark=_useState8[1];console.log(saved);var ref=useRef();useEffect(function(){var timeout=setTimeout(function(){setDebounceSearch(term);setBookmark(false);},1200);return function(){return clearTimeout(timeout);};},[term]);useEffect(function(){var search=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var responed;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('https://en.wikipedia.org/w/api.php',{params:{action:'query',list:'search',origin:'*',format:'json',srsearch:debounceSearch}});case 2:responed=_context.sent;setResult(responed.data.query.search);case 4:case\"end\":return _context.stop();}}},_callee);}));return function search(){return _ref2.apply(this,arguments);};}();search();},[debounceSearch]);var handleBookmark=function handleBookmark(){setBookmark(!bookmark);saved.push(term);};var fetchResult=result.map(function(el){return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",ref:ref,children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:/*#__PURE__*/_jsx(\"a\",{href:\"https://en.wikipedia.org/wiki/\".concat(el.title),children:el.title})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"span\",{dangerouslySetInnerHTML:{__html:el.snippet}})})]},el.pageid);});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control py-3 my-3\",id:\"exampleFormControlInput1\",onChange:function onChange(e){return setTerm(e.target.value);},value:term})}),/*#__PURE__*/_jsx(\"div\",{onClick:handleBookmark,className:\"mx-1 mt-4\",children:bookmark===true?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star yellow\"}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-container\",children:fetchResult})]});};export default SearchApp;","map":{"version":3,"names":["React","useEffect","useState","useRef","axios","SearchApp","saved","term","setTerm","debounceSearch","setDebounceSearch","result","setResult","bookmark","setBookmark","console","log","ref","timeout","setTimeout","clearTimeout","search","get","params","action","list","origin","format","srsearch","responed","data","query","handleBookmark","push","fetchResult","map","el","title","__html","snippet","pageid","e","target","value"],"sources":["D:/Wikisearch/src/component/searchapp/searchapp.jsx"],"sourcesContent":["import React from 'react'\r\nimport { useEffect, useState, useRef } from 'react'\r\nimport axios from 'axios'\r\nimport './searchapp.css'\r\n\r\n\r\nconst SearchApp = ({ saved }) => {\r\n    const [term, setTerm] = useState(' ')\r\n    const [debounceSearch, setDebounceSearch] = useState(term)\r\n    const [result, setResult] = useState([])\r\n\r\n    const [bookmark, setBookmark] = useState(false);\r\n\r\n    console.log(saved);\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        const timeout = setTimeout(() => {\r\n            setDebounceSearch(term)\r\n            setBookmark(false);\r\n        }, 1200);\r\n        return () => clearTimeout(timeout)\r\n    }, [term])\r\n\r\n\r\n    useEffect(() => {\r\n        const search = async () => {\r\n            const responed = await axios.get('https://en.wikipedia.org/w/api.php', {\r\n                params: {\r\n                    action: 'query',\r\n                    list: 'search',\r\n                    origin: '*',\r\n                    format: 'json',\r\n                    srsearch: debounceSearch,\r\n                }\r\n            })\r\n            setResult(responed.data.query.search);\r\n\r\n        }\r\n        search()\r\n    }, [debounceSearch]);\r\n\r\n    const handleBookmark = () => {\r\n        setBookmark(!bookmark);\r\n        saved.push(term)        \r\n    }\r\n\r\n    const fetchResult = result.map((el) => {\r\n        return (\r\n            <div className=\"card\" key={el.pageid} ref={ref}>\r\n                <div className=\"card-title\">\r\n                    <a href={`https://en.wikipedia.org/wiki/${el.title}`}>{el.title}</a>\r\n                </div>\r\n                <p><span dangerouslySetInnerHTML={{ __html: el.snippet }} /></p>\r\n            </div>\r\n        )\r\n    })\r\n\r\n    return (\r\n        <div className='container'>\r\n            <div className='search-bar'>\r\n                <div>\r\n                    <input\r\n                        type='text'\r\n                        className='form-control py-3 my-3'\r\n                        id='exampleFormControlInput1'\r\n                        onChange={(e) => setTerm(e.target.value)}\r\n                        value={term}\r\n                    />\r\n\r\n                </div>\r\n                <div onClick={handleBookmark} className=\"mx-1 mt-4\" >\r\n                    {bookmark === true ? <i className=\"fas fa-star yellow\"></i> : <i className=\"fas fa-star\"></i>}\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div className=\"card-container\">\r\n                {fetchResult}\r\n            </div>\r\n        </div>\r\n\r\n\r\n    )\r\n}\r\n\r\nexport default SearchApp"],"mappings":"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"},"metadata":{},"sourceType":"module"}